---

- name: To download and install java
  yum:
    name: "{{ item }}"
    state: present
  with_items:
    - "{{ java_version_redhat }}-openjdk-headless"
    - "{{ java_version_redhat }}-openjdk-devel"

- name: To create JAVA Environment
  shell: a=$(update-alternatives  --list | grep {{ java_version_redhat }} | awk '{ print $3 }' | head -1) && echo "JAVA_HOME=$a" > /etc/environment
  tags:
   - test

- name: Copy the Environment file
  template:
    src: java.j2
    dest: /root/java.sh
    mode: 655

- name: run script on the machine
  command: /bin/bash /root/java.sh
